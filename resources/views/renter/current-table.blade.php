<div class="tab-pane fade show" id="pills-home" role="tabpanel"
    aria-labelledby="pills-home-tab" tabindex="0">
    <div class="card card-body shadow-none" style="padding: 10px;line-height: 5px;">
        <div class="row g-3 new_box" style="padding: 0px 30px;">
            <div class="col-md-6 col-lg5">
                <div
                    class="card bg-label-success card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A101</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-success h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ชำระเงินแล้ว
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div
                    class="card bg-label-success card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A102</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-success h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ชำระเงินแล้ว
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div
                    class="card bg-label-success card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A103</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-success h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ชำระเงินแล้ว
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-success card-check shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A104</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-success h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ชำระเงินแล้ว
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-success card-check shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A105</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-success h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ชำระเงินแล้ว
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A106</b></h5>
                            <p>ไม่มีผู้เช่า</p>
                        <div class="h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ห้องว่าง
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A107</b></h5>
                            <p>ไม่มีผู้เช่า</p>
                        <div class="h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ห้องว่าง
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A108</b></h5>
                            <p>ไม่มีผู้เช่า</p>
                        <div class="h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ห้องว่าง
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A109</b></h5>
                            <p>ไม่มีผู้เช่า</p>
                        <div class="h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ห้องว่าง
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A110</b></h5>
                            <p>ไม่มีผู้เช่า</p>
                        <div class="h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ห้องว่าง
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-danger card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A106</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-danger h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ค้างชำระ
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-danger card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A107</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-danger h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ค้างชำระ
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-danger card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A108</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-danger h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ค้างชำระ
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-danger card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A109</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-danger h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ค้างชำระ
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-label-danger card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: black"><b>A110</b></h5>
                            <p style="color: rgb(40, 40, 40);font-weight: 430;">นางสาว มาลินี ประเทศา</p>
                        <div class="text-danger h5 text-center" style="margin-top: 0;margin-bottom: 0;">
                            ค้างชำระ
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="tab-pane fade show active" id="pills-profile" role="tabpanel"
    aria-labelledby="pills-profile-tab" tabindex="0">
    <table class="datatables-basic table dataTable no-footer dtr-column"
            id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
            <thead class="border-top">
                <tr class=" table-info">
                    <th class="text-center" tabindex="0" style="width: 40px;">
                        ลำดับ
                    </th>
                    <th class="text-center">
                        ชื่อผู้เช่า
                    </th>
                    <th class="text-center">
                        ห้อง</th>
                    <th class="text-center">
                        เบอร์ติดต่อ</th>
                    <th class="text-center">
                        ยานพาหนะ
                    </th>
                    <th class="text-center">
                        วันที่เข้าพัก
                    </th>
                    <th class="text-center">
                        วันสิ้นสุดสัญญาเช่า
                    </th>
                    <th class="text-center">
                        อายุสัญญา
                    </th>
                    {{-- <th class="text-center">
                        
                    </th> --}}
                </tr>
            </thead>
            <tbody>
                @foreach ($list_data as $key => $row)
                    <tr class="odd">
                        <td class="text-center">
                            {{ $loop->iteration + (($list_data->currentPage() - 1) * $list_data->perPage()) }}
                        </td>
                        <td class="text-center">
                            {{ $row->prefix.' '.$row->name.' '.$row->surname }}
                        </td>
                        <td class="text-center">{{ @$row->room_for_rent->room->name ?? '-' }}
                        </td>
                        <td class="text-center">{{ $row->phone }}
                        </td>
                        <td class="text-center">
                            {{@$row->vehicles->car_registration ?? '-'}}
                        </td>
                        <td class="text-center">
                            @if(@$row->room_for_rent->date_stay)
                            {{ date('d/m/Y', strtotime(@$row->room_for_rent->date_stay)) }}
                            @else
                            -
                            @endif
                        </td>
                        <td class="text-center">
                            @if(@$row->room_for_rent->date_stay)
                            {{ date('d/m/Y', strtotime("+6 months", strtotime(@$row->room_for_rent->date_stay))) }}
                            @else
                            -
                            @endif
                        </td>
                        <td class="text-center">
                            6
                            {{-- {{ $row->room_for_rent->room->name }} --}}
                        </td>
                        {{-- <td class="text-center">
                            <div class="d-inline-block text-nowrap">
                                <button class="btn btn-sm btn-icon btn-text-secondary rounded-pill waves-effect waves-light me-2">
                                    <i class="ti ti-eye ti-md" style="color:#6f6b7d !important;"></i>
                                </button>
                            </div>
                        </td> --}}
                    </tr>
                @endforeach
            </tbody>
        </table>
    
    <div class="row">
        <div class="col-sm-12 col-md-6 ps-4">
            <div class="dataTables_info" id="DataTables_Table_1_info" role="status" aria-live="polite">
                All &nbsp; {{$list_data->total()}} &nbsp; entries
            </div>
        </div>

        <div class="col-sm-12 col-md-6 pe-4">
            <div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_1_paginate">
                @if ($list_data->lastPage() > 1)
                    <ul class="pagination">
                        <!-- ปุ่ม First -->
                        <li class="page-item {{ ($list_data->currentPage() == 1) ? ' disabled' : '' }}">
                            <a class="page-link" href="javascript:void(0)" onclick='loadCurrentData("{{ $list_data->url(1) }}")'>First</a>
                        </li>

                        <?php
                            // จำนวนหน้าที่ย่อ (ตัวอย่างนี้แสดงแค่ 8 หน้า)
                            $total_links = 9;  // เปลี่ยนจาก 5 เป็น 9
                            $half_total_links = floor($total_links / 2);
                            $from = $list_data->currentPage() - $half_total_links;
                            $to = $list_data->currentPage() + $half_total_links;

                            // แก้ไขการคำนวณจากหน้าแรกหรือหน้าสุดท้าย
                            if ($list_data->currentPage() < $half_total_links) {
                                $to += $half_total_links - $list_data->currentPage();
                            }
                            if ($list_data->lastPage() - $list_data->currentPage() < $half_total_links) {
                                $from -= $half_total_links - ($list_data->lastPage() - $list_data->currentPage()) - 1;
                            }

                            // กำหนดให้ค่าของ $from และ $to ไม่ให้ต่ำกว่า 1 หรือมากกว่าหน้าสุดท้าย
                            $from = max($from, 1);
                            $to = min($to, $list_data->lastPage());
                        ?>

                        <!-- แสดงหน้าที่ในช่วงที่คำนวณ -->
                        @for ($i = $from; $i <= $to; $i++)
                            <li class="page-item {{ ($list_data->currentPage() == $i) ? ' active' : '' }}">
                                <a class="page-link" href="javascript:void(0)" onclick='loadCurrentData("{{ $list_data->url($i) }}")'>{{ $i }}</a>
                            </li>
                        @endfor

                        <!-- เพิ่มการแสดงเลขหน้าสุดท้าย -->
                        @if ($to < $list_data->lastPage())
                            <li class="px-2 pe-1 mt-4">
                                ...
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="javascript:void(0)" onclick='loadCurrentData("{{ $list_data->url($list_data->lastPage()) }}")'>{{ $list_data->lastPage() }}</a>
                            </li>
                        @endif

                        <!-- ปุ่ม Last -->
                        <li class="page-item {{ ($list_data->currentPage() == $list_data->lastPage()) ? ' disabled' : '' }}">
                            <a class="page-link" href="javascript:void(0)" onclick='loadCurrentData("{{ $list_data->url($list_data->lastPage()) }}")'>Last</a>
                        </li>
                    </ul>
                @endif
            </div>
        </div>
    </div>
</div>